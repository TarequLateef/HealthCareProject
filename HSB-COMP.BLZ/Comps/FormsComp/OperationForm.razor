
<form class="row me-3 @(ModalFormProp?"":"hsb-form-shadow pe-4 pb-3 pt-3")" @onsubmit="SaveItem" >
    <div class="row justify-content-start hsb-bg-title pb-2 pt-2 ">
        <div class="col-md-1">
            @if (!string.IsNullOrEmpty(ListLinkProp))
            {
                <ListBtn TitleProp="عرض القائمة" ListLinkProp="@ListLinkProp" />
            }
        </div>
        <div class="col-md-1 offset-md-6">
            @if (!(WithDataFormProp || string.IsNullOrEmpty(ItemIDProp)))
            {
                <InfoBtn TitleProp="@("بيانات " + TitleProp)" ItemIDProp="@ItemIDProp"
                         DetailWinProp="@DetailsLinkProp" AvailableItem="WithAvalDataProp"/>
            }
        </div>
        <div class="col-md-1">
            @if (!ModalFormProp)
            {
                if (!string.IsNullOrEmpty(CreateLinkProp))
                {
                    <CreateBtn CreateLinkProp="@CreateLinkProp" EvCreate="CreateItem" />
                }
            }
        </div>
        <div class="col-md-1">
            @if (!string.IsNullOrEmpty(UpdateLinkProp))
            {
                <UpdateBtn UpdateLinkProp="@UpdateLinkProp" ItemIDProp="@ItemIDProp" />
            }
        </div>
        <div class="col-md-1">
            @if (WithDataStatusProp)
            {
                if (!string.IsNullOrEmpty(CreateLinkProp))
                {
                    <StopRestBtn WithAvalProp="WithAvalDataProp" ItemIDProp="@ItemIDProp"
                                 EvRestore="ResotreOrStop" MessageProp="@StopMsgProp" />
                }
            }
        </div>
        <div class="col-md-1">
            @if (!string.IsNullOrEmpty(CreateLinkProp))
            {
                <DeleteBtn EvDelete="DeleteItem" MessageProp="@StopMsgProp" ItemIDProp="@ItemIDProp"/>
            }
        </div>
    </div>
    <div class="row hsb-form-back pt-4  pe-5">
        @ElemOperation
    </div>
    @if (!WithDataFormProp)
    {
        <div class="row justify-content-end pb-2 pt-2 " style="background-color:#cad7c0;">
            <div class="col-md-1 offset-md-9">
                @* <ReloadBtn IsDisable="@DisableReload" EvReload="ReloadForm"/> *@
            </div>
            <div class="col-md-1">
                <SaveBtn ModalAttr="@(ModalFormProp?modalAttr:new Dictionary<string, object>())"
                         IsDisable="@DisableSave" />
            </div>
            <div class="col-md-1">
                <CancelBtn ModalAttr="@(ModalFormProp?modalAttr:new Dictionary<string, object>())"
                    EvCancel="Exit"/>
            </div>
        </div>
    }
</form>

@code {
    [Parameter] public string TitleProp { get; set; } = "العنوان";
    [Parameter] public string ListLinkProp { get; set; } = string.Empty;
    [Parameter] public string CreateLinkProp { get; set; } = string.Empty;
    [Parameter] public string UpdateLinkProp { get; set; } = string.Empty;
    [Parameter] public string DetailsLinkProp { get; set; } = string.Empty;
    [Parameter] public string StopMsgProp { get; set; } = string.Empty;
    [Parameter] public string DelMsgProp { get; set; } = string.Empty;
    [Parameter] public string ItemIDProp { get; set; } = string.Empty;
    [Parameter] public string OperFormID { get; set; } = string.Empty;
    [Parameter] public bool WithDataFormProp { get; set; } = false;
    [Parameter] public bool WithDataStatusProp { get; set; } = true;
    [Parameter] public bool WithAvalDataProp { get; set; } = true;
    [Parameter] public bool ModalFormProp { get; set; } = false;
    [Parameter] public bool DisableSave { get; set; } = false;
    [Parameter] public bool DisableReload { get; set; } = true;
    [Parameter] public RenderFragment ElemOperation { get; set; }
    [Parameter] public EventCallback EvSave { get; set; }
    [Parameter] public EventCallback EvCreate { get; set; }
    [Parameter] public EventCallback EvRestore{ get; set; }
    [Parameter] public EventCallback EvExit { get; set; }
    [Parameter] public EventCallback EvDelete { get; set; }
    Dictionary<string, object> modalAttr { get; set; } = new()
    {
            {"data-bs-dismiss","modal"}
    };
    void SaveItem() => EvSave.InvokeAsync();
    void CreateItem() => EvCreate.InvokeAsync();
    void ResotreOrStop() => EvRestore.InvokeAsync();
    void Exit() => EvExit.InvokeAsync();
    void DeleteItem() => EvDelete.InvokeAsync();
}
